# “Kāds es esmu? Rakstura īpašības” — Review

## Findings§

- **UI/UX & mobile**: Layout matches the project’s card + navbar shell, and buttons are large enough for touch. However, the feedback block is always visible (even when summary is shown), and the summary view hides the question card but leaves the card footer counters visible, which could confuse users on small screens. Mode badge is text-only; a clearer selected state or tab-like styling would help on mobile.
- **Accessibility & feedback**: Buttons become disabled after answering, but there is no focus move or aria-live update beyond the alert class. The “Ielādē datus…” state doesn’t announce completion, and screen readers won’t know when mode buttons become enabled. The mistakes list shows the selected answer but doesn’t explicitly mark the correct choice vs wrong choice, reducing clarity for review.
- **Data handling**: CSV parsing uses a simple `split(',')`, so any future commas (e.g., in English glosses or notes) would break rows. No defensive filtering for blank rows beyond trimming; neutral items are excluded from Mode A correctly. Data is fetched via a relative path, but there’s no offline fallback or cache awareness like other games that rely on `assetUrl` helpers. No validation for the `group` domain (“optimists/pesimists/neutral”), so malformed rows would slip through.
- **Game logic**: Question pool caps at 10 but doesn’t guarantee inclusion of all “optimists/pesimists” items across rounds; rotation is random without streak prevention. Distractors are drawn from unique English glosses but could repeat across questions within a round, and multi-sense glosses (“satisfied; content”) are treated as a single string, which may feel clunky as an option. Score badges display live counts, yet the next button is manual-only—no auto-advance like some other games. No persistence of streaks or prior mistakes between rounds.
- **Compatibility with project patterns**: Uses inline script rather than `src/games/*` modular structure many newer games use; no page-specific class on `<body>` for potential theming. Navbar/footer links are updated, but the page doesn’t include any custom styles (good), and it loads `theme.js`/`page-init.js` consistently. Active nav state is set, which aligns with other pages.
- **Learning design**: Immediate feedback gives translation, but Mode B doesn’t surface the Latvian-English pair again in the mistakes list beyond a one-line badge—no pronunciation hints or context sentences. Mode A feedback only says “optimists/pesimists” without a short rationale or group label in mistakes, limiting reinforcement. There’s no spaced-repetition or weighting of previously missed items; mistakes don’t affect subsequent question selection. No quick-glance progress for how many optimist vs pessimist items were answered correctly.
- **Data format choice**: Keeping CSV as the canonical source aligns with the repo’s workflow (spreadsheet-friendly, existing scripts). JSON would improve robustness and avoid fragile `split(',')` parsing, so the best path is to generate JSON as a build artifact (e.g., via `scripts/`), load JSON in the game, and keep CSV as the editable source.

## Action plan

- **Strengthen UX flows (short term)**: Hide or restyle the feedback block when showing the summary; adjust footer counters to reflect summary state; give the active mode a filled style (`btn-primary`) and ensure the mode label is visible on small screens. Add a gentle auto-scroll to the feedback/summary anchor on mobile.
- **Improve accessibility (short term)**: Announce data-load completion and mode-enabled state via `aria-live`; move focus to the question text after rendering; in mistakes and feedback, explicitly label correct vs chosen options; ensure the summary heading has `aria-live` or is focusable for SR users.
- **Harden CSV parsing (short term)**: Replace manual `split(',')` with a minimal CSV parser that handles commas/quotes; validate the `group` field to allowed values; ignore empty/invalid rows gracefully; resolve data URL with the shared asset helper to stay subpath-safe.
- **Refine question generation (medium term)**: Prevent duplicate distractors within a round, and rotate through the full pool before repeating; normalize multi-gloss strings by splitting on `;` for cleaner options while keeping the stored answer intact.
- **Enhance learning feedback (medium term)**: Add short rationales in Mode A (e.g., “jo tic labajam cilvēkā” vs “jo žēlojas par savu dzīvi”); in Mode B show a compact card in the mistakes list with LV + EN + group/notes; optionally auto-advance after a short delay to keep flow.
- **Align with project structure (medium term)**: Move logic into `src/games/character-traits/` and import from the page; add a page-specific body class for future styling without touching global CSS; reuse the common footer year helper.
- **Learning analytics (later)**: Track per-group accuracy (optimists/pesimists/neutral) and show a mini breakdown to guide practice; consider lightweight local persistence of last score/streak to encourage return visits.
